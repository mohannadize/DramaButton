<!DOCTYPE html>
<html>
<head>
	<title>The Drama Button!</title>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='description' content='An Air horn. Probably the best air horn web app there is.'>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <link rel='canonical' href='https://mohannadize.github.io/DramaButton'>
    <link rel='manifest' href='manifest.json'>
    <meta name='mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='application-name' content='Drama!'>
    <meta name='apple-mobile-web-app-status-bar-style' content='black'>
    <meta name='apple-mobile-web-app-title' content='Air Horner'>
    <link rel='icon' sizes='192x192' href='/images/btn192.png'>
    <link rel='apple-touch-icon' href='/images/btn192.png'>
    <meta name='msapplication-TileImage' content='/images/btn144.png'>
    <meta name='msapplication-TileColor' content='#f5f5f5'>
    <meta name='theme-color' content='#f5f5f5'>
    <meta property='og:title' content='The Drama Button'>
    <meta property='og:type' content='website'>
    <meta property='og:url' content='https://mohannadize.github.io/DramaButton'>
    <meta property='og:description' content='The Drama Button for all the dramatic moments of your life!!'>
    <meta name='twitter:card' content='summary'>
    <meta name='twitter:url' content='https://mohannadize.github.io/DramaButton'>
    <meta name='twitter:title' content='The Drama Button'>
    <meta name='twitter:description' content='The Drama Button for all the dramatic moments of your life!'>
    <meta name='twitter:creator' content='@mohannadize'>
    <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
    <style type="text/css">
    	* {
    		margin: 0;
    		padding: 0;
    	}
    	a {
    		color: inherit;
    		text-decoration: none;
    	}
    	.header {
    		width: 70%;
    		text-align: center;
    		margin: auto;
    		margin-top: 50px;
    		cursor: default;
    	}
    	.header h1 {
    		text-align: center;
    		width: 100%;
    		font-family: Pacifico, sans-serif;
    		font-size: 36px;
    		font-weight: 400;
    		text-shadow: 0 2px 5px rgba(0,0,0,.1)
    	}
    	.footer {
    		position: fixed;
    		bottom: 0;
    		width: 100%;
    		background-color: #eee;
    		box-shadow: 0 2px 7px 2px rgba(0,0,0,0.3);
    	}
    	.footer ul {
    		margin-top: 15px;
    		margin-bottom: 15px;
    		text-align: center;
    	}
    	.footer li {
    		display: inline-block;
    		margin-left: 15px;
    		font-size: 18px;
    		margin-right: 15px;
    		font-family: Roboto,sans-serif;
    		font-weight: 300;
    		text-shadow: 0 2px 3px rgba(0,0,0,.1);
    		transition: all 250ms ease;
    		opacity: 0.8;
    	}
    	.footer li:focus, .footer li:active, .footer li:hover {
    		opacity: 1;
    	} 
    	.btnInn {
			transform: scale(1);
    		position: absolute;
    		width: 90%;
    		height:90%;
    		left: 5%;
    		top: 5%;
    		border-radius: 50%;
    		box-shadow: 0 0 15px -4px rgba(0,0,0,0.3);
    		background-color: #FFE2E2;
    		z-index: 5;
    		transition: all 50ms ease;
    	}
    	.pressed {
    		transform: scale(0.95);
    	}
    	.btn {
    		left:35%;
    		top: 25%;
    		width: 30%;
    		padding-top: 30%;
    		border-radius: 50%;
    		box-shadow: 0 0 15px -4px rgba(0,0,0,0.5);
    		position: absolute;
    		z-index: 5;
    		background-color: #f00;
    	}
    	@media (max-width: 500px) and (min-width: 0px) {
    		.header {
    			width: 90%;
    		}
    		.btn {
    			width: 50%;
    			padding-top: 50%;
    			left: 25%;
    			top: 30%;
    		}
    	}
    	@media (min-width: 1000px) {
    		.btn {
    			width: 20%;
    			padding-top: 20%;
    			left:40%;
    		}
    	}
    </style>
</head>
<body>
	<div class="header"><h1>The Drama Button</h1></div>
	<div class="btn" id="drama">
		<div class="btnInn"></div>
	</div>
	<div class="footer">
		<ul>
			<a href="about.html"><li>About</li></a>
			<a target="_blank" href="https://twitter.com/mohannadize"><li>@Mohannadize</li></a>
		</ul>
	</div>
		<script type="text/javascript">
	(function() {
	  'use strict';

	  var Horn = function() {
	    // The Horn Player.

	    var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
	    var source;
	    var buffer;

	    var loadSound = function(bufferObj, callback) {
	      callback = callback || function() {};

	      var xhr = new XMLHttpRequest();

	      xhr.onload = function() {
	        audioCtx.decodeAudioData(xhr.response, function(decodedBuffer) {
	          callback(decodedBuffer);
	        });
	      };

	      xhr.open('GET', 'drama.swf.mp3' );
	      xhr.responseType = 'arraybuffer';
	      xhr.send();
	    };


	    this.start = function() {
	      source = audioCtx.createBufferSource();

	      source.connect(audioCtx.destination);
	        
	      source.buffer = buffer;
	      
	      source.start(0);
	    };

	    this.stop = function() {
	      source.loop = false;
	    };

	    var init = function() {

	      loadSound(buffer, function(decodedBuffer) {
	        buffer = decodedBuffer;
	      });
	    };

	    init();

	  };

	  var AirHorn = function(root) {
	    // Controls the AirHorn.

	    var airhornImage = root.querySelector("#drama .btnInn");
	    var horn = new Horn();

	    var start = function(e) {
    	  if (e.path[0] == airhornImage) {e.preventDefault();} else {return;}
	      if(e.touches && e.touches.length > 1) {
	        // Multi touch. OFF.
	        return false;
	      }
	      airhornImage.classList.add('pressed');
	      horn.start();
	    };

	    var stop = function(e) {
    	  if (e.path[0] == airhornImage) {e.preventDefault();} else {return;}
	      airhornImage.classList.remove('pressed');
	    };
	    
	    airhornImage.addEventListener("mousedown", start);
	    airhornImage.addEventListener("touchstart", start);

	    document.documentElement.addEventListener("mouseup", stop);
	    document.documentElement.addEventListener("touchend", stop);

	  };

	  window.addEventListener('load', function() {
	    var airhornEl = document.getElementById('drama');
	    var airhorn = new AirHorn(airhornEl);
	  });
	})();

	if ("serviceWorker" in navigator) navigator.serviceWorker.register("sw.js");
	</script>
</body>
</html>